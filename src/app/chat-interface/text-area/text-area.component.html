<div id="chat-header-box" *ngIf="this.chatContextService.storedOpenedChatId.value">
  <img src="{{(this.chatContextService.storedOpenChat | async)?.pfpSourceUrl}}" alt="">
  <!-- .value cannot be used, as it would be a static reference to a past openChat, the first one that gets open -->
  <span>{{(this.chatContextService.storedOpenChat | async)?.chatName}}</span>
</div>

<div id="conversation-box">
  <p class="chat-box-filler" *ngIf="!this.chatContextService.storedOpenedChatId.value">
    Open a chat to start talking.
  </p>
  <p class="chat-box-filler" *ngIf="this.chatContextService.storedOpenedChatId.value && this.chatContextService.storedMessageList.value.length == 0">
    Send the very first message of {{this.chatContextService.storedOpenChat.value.chatName}}!
  </p>
  <ul *ngIf="this.chatContextService.storedMessageList.value.length > 0" id="message-list">
    <li *ngFor="let message of this.chatContextService.storedMessageList.value" [ngClass]="{'own-message': message.writtenByMe, 'message-pack': true}">
      <!-- todo to enable image sending, either convert all links to embeds, or add some optional img tag -->
      <div class="message-quick-info">
        <img class="sender-pfp" src="{{message.senderId}}.png" alt="">
        <span class="sender-name">{{message.senderName?.value}}:</span>
      </div>
      <div class="sender-content">{{message.content}}</div>
    </li>
  </ul>
</div>

<div id="input-box" *ngIf="this.chatContextService.storedOpenedChatId.value">
  <input id="message-input" [(ngModel)]="messageInput">
  <button id="message-send" (click)="sendMessage()" [disabled]="!messageInput">
    <img src="" alt="Send">
  </button>
</div>
